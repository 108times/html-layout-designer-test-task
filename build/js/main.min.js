"use strict";function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}document.addEventListener("DOMContentLoaded",(function(){var e;e=function(e){var t=e.dataset.placeholder;if(void 0!==t){var r=document.createElement("label");r.for=e.name,r.textContent=t,r.classList.add("floating-placeholder"),e.parentElement.prepend(r),e.placeholderEl=r,e.addEventListener("focus",(function(e){r.classList.add("focus")})),e.addEventListener("blur",(function(t){void 0===e.value||""===e.value?(r.classList.remove("focus"),e.classList.remove("has-value")):e.classList.add("has-value")}))}},document.querySelectorAll("[data-placeholder]").forEach((function(t){return e(t)}));!function(){var e=document.querySelector("[data-select-year]");e.classList.add("birthyear-select");var t=document.createElement("img");t.src="images/svg/expand-list.svg",t.alt="expand-birthyear-list",t.classList.add("birthyear-select__icon"),e.prepend(t);var r=e.querySelector("input");r.classList.add("birthyear-select__input"),r.readOnly="readonly";var n=document.createElement("ul");n.classList.add("birthyear-select__list");for(var a=e.dataset.yearStart||1970,o=function(e){var t=document.createElement("li");t.classList.add("birthyear-select__list-item"),t.textContent=e,t.onclick=function(t){r.value=e,r.classList.add("has-value"),r.placeholderEl.classList.add("focus")},n.append(t)},i=e.dataset.yearEnd||2003;i>=a;i--)o(i);e.prepend(n);var c=function(e){e.preventDefault(),t.classList.add("birthyear-select__icon-rotated"),n.classList.add("shown")},s=function(e){t.classList.remove("birthyear-select__icon-rotated"),n.classList.remove("shown")};r.addEventListener("focus",(function(e){return c(e)})),t.addEventListener("focus",(function(e){return c(e)})),t.addEventListener("blur",(function(e){return s()})),r.addEventListener("blur",(function(e){return s()}))}();var t;t=function(e){var t=e.parentElement;e.hidden="hidden";var r,n=e.id||(r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return Math.random().toString(36).substring(e)}(),e.setAttribute("id",r),r),a=document.createElement("span");a.classList.add("custom-checkbox");var o=document.createElement("img");o.src="images/svg/checked.svg",o.alt="",o.classList.add("custom-checkbox__indicator"),a.checked=!1,a.append(o);var i=document.createElement("label");i.setAttribute("for",n),i.className="custom-checkbox__label",i.textContent=e.dataset.label,a.addEventListener("click",(function(){var t=a.checked;t?(a.classList.remove("custom-checkbox--checked"),o.classList.remove("custom-checkbox__indicator--visible"),e.setAttribute("checked",!1)):(a.classList.add("custom-checkbox--checked"),o.classList.add("custom-checkbox__indicator--visible"),e.setAttribute("checked",!0)),a.checked=!t})),t.append(a),t.append(i)},document.querySelectorAll("[data-custom-checkbox]").forEach((function(e){return t(e)}));var r=function(e,t){return t/100*e};!function(){var e,t=new Map([[0,{dashes:7,markerHeight:0}],[24,{dashes:6,markerHeight:6}],[50,{dashes:5,markerHeight:9}],[75,{dashes:4,markerHeight:11}],[100,{dashes:3,markerHeight:14}]]),n=document.querySelector("[data-range]"),a=n.querySelector(".range__control"),o=n.querySelector(".range__control-container"),i=(document.querySelectorAll(".range__gradient"),document.querySelectorAll(".range__gradient-fill")),c=n.dataset.rangeStart,s=n.offsetWidth;e=t,n.querySelectorAll("[data-point]").forEach((function(t){var n="",a="",o="",i=r(t.dataset.point,s);i===s?(t.classList.add("range__point--right"),n="range__point-orientation--right",a="range__point-text--right",o="range__point-marker--right"):t.style.left=i+"px";var c=document.createElement("div");c.className="range__point-orientation "+n;var l=function(e,t){e=Number(e);var r=t.get(e);return r&&t.set(e,_objectSpread(_objectSpread({},r),{},{isUsed:!0})),r}(t.dataset.point,e),u=l.dashes,d=l.markerHeight,f=document.createElement("div");f.className="range__point-dashes",f.style.height=2*u+"px";for(var p=0;p<u;p++){var m=document.createElement("span");m.className="range__point-dash",f.append(m)}c.append(f);var v=document.createElement("div");v.className="range__point-marker "+o,v.style.height=d+"px",c.append(v);var y=document.createElement("p");y.className="range__point-text "+a,y.textContent=t.dataset.text,t.append(y),t.append(c)}));var l=function(e,t,r){i.forEach((function(e){e.style.width=s-t+"px"})),"up"===e?(a.style.left=t+"px",t+=r):"down"===e&&(a.style.left=t+"px",t-=r)},u=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(null!==i)r=i;else{var c=t.getBoundingClientRect();r=e.pageX-c.x}var s=r,u=a.style.left.replace("px",""),f=s>u?"up":"down",p=setTimeout((function e(){l(f,r,n);var t=r;t===s?(clearTimeout(p),d.current=t):p=setTimeout(e,o)}),o)},d=function e(a){var i=function(e){u(e,o)};n.addEventListener("mouseout",(function(e){setTimeout((function(){e.target===n&&o.removeEventListener("mousemove",i)}))})),o.addEventListener("mousemove",i),o.addEventListener("mouseup",(function n(a){o.removeEventListener("mousemove",i),setTimeout((function(){var a,i;o.removeEventListener("mouseup",n),function(e,t,r){var n,a=[];r.reduce((function(e,r){var n=r-t;return a.push({value:n,absValue:Math.abs(n),point:r}),r}),r[0]),a.forEach((function(e){(void 0===n||e.absValue<n.absValue)&&(n=e)})),setTimeout((function(){return u(null,null,1,400,n.point)}),200)}(0,e.current,(a=function(e){var t,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;void 0===n[1].isUsed&&e.delete(n[0])}}catch(e){r.e(e)}finally{r.f()}return e}(t).keys(),i=s,_toConsumableArray(a).map((function(e){return r(e,i)}))))}))}))};a.addEventListener("mousedown",d);var f;f=r(c,s),a.style.setProperty("left",f+"px"),i.forEach((function(e){return e.style.setProperty("width",f+"px")}))}()}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJvIiwiYWxsb3dBcnJheUxpa2UiLCJpdCIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiQXJyYXkiLCJpc0FycmF5IiwiX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwibGVuZ3RoIiwiaSIsIkYiLCJzIiwibiIsImRvbmUiLCJ2YWx1ZSIsImUiLCJfZSIsImYiLCJUeXBlRXJyb3IiLCJlcnIiLCJub3JtYWxDb21wbGV0aW9uIiwiZGlkRXJyIiwiY2FsbCIsInN0ZXAiLCJuZXh0IiwiX2UyIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyIiwiX2FycmF5V2l0aG91dEhvbGVzIiwiX2l0ZXJhYmxlVG9BcnJheSIsIl9ub25JdGVyYWJsZVNwcmVhZCIsIm1pbkxlbiIsIl9hcnJheUxpa2VUb0FycmF5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJzbGljZSIsImNvbnN0cnVjdG9yIiwibmFtZSIsImZyb20iLCJ0ZXN0IiwiaXRlciIsImxlbiIsImFycjIiLCJvd25LZXlzIiwib2JqZWN0IiwiZW51bWVyYWJsZU9ubHkiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwic3ltYm9scyIsImZpbHRlciIsInN5bSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwidGFyZ2V0IiwiYXJndW1lbnRzIiwic291cmNlIiwiZm9yRWFjaCIsImtleSIsIl9kZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVmaW5lUHJvcGVydHkiLCJvYmoiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNyZWF0ZUZsb2F0aW5nUGxhY2Vob2xkZXIiLCJlbCIsInRleHQiLCJkYXRhc2V0IiwicGxhY2Vob2xkZXIiLCJ1bmRlZmluZWQiLCJjcmVhdGVFbGVtZW50IiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJwYXJlbnRFbGVtZW50IiwicHJlcGVuZCIsInBsYWNlaG9sZGVyRWwiLCJyZW1vdmUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYmlydGhZZWFyU2VsZWN0IiwicXVlcnlTZWxlY3RvciIsImV4cGFuZEljb24iLCJzcmMiLCJhbHQiLCJpbnB1dCIsInJlYWRPbmx5IiwidWwiLCJtaW4iLCJ5ZWFyU3RhcnQiLCJfbG9vcCIsImxpIiwib25jbGljayIsImFwcGVuZCIsInllYXJFbmQiLCJvcGVuU2VsZWN0aW9uIiwicHJldmVudERlZmF1bHQiLCJjbG9zZVNlbGVjdGlvbiIsImhhbmRsZUJpcnRoWWVhclNlbGVjdCIsImNyZWF0ZUN1c3RvbUNoZWNrQm94IiwicGFyZW50IiwiaGlkZGVuIiwibmV3SWQiLCJpZCIsIk1hdGgiLCJyYW5kb20iLCJzdWJzdHJpbmciLCJnZXRSYW5kb21TdHJpbmciLCJzZXRBdHRyaWJ1dGUiLCJjaGVja2JveCIsImluZGljYXRvciIsImNoZWNrZWQiLCJsYWJlbCIsImNsYXNzTmFtZSIsIml0ZW0iLCJnZXRGcm9tUGVyY2VudGFnZXMiLCJwZXJjZW50YWdlcyIsInBvaW50c0RhdGEiLCJwb2ludHMiLCJNYXAiLCJkYXNoZXMiLCJtYXJrZXJIZWlnaHQiLCJyYW5nZSIsInJhbmdlQ29udHJvbCIsInJhbmdlQ29udHJvbENvbnRhaW5lciIsInJhbmdlR3JhZGllbnRzRmlsbHMiLCJpbml0aWFsVmFsdWVQZXJjZW50YWdlcyIsInJhbmdlU3RhcnQiLCJyYW5nZVdpZHRoIiwib2Zmc2V0V2lkdGgiLCJwb2ludCIsIm9yaWVudGF0aW9uQWRkaXRpb25DbGFzcyIsInRleHRBZGRpdGlvbkNsYXNzIiwibWFya2VyQWRkaXRpb25hbENsYXNzIiwib2Zmc2V0TGVmdCIsInN0eWxlIiwibGVmdCIsIm9yaWVudGF0aW9uIiwiX2dldERhc2hlc0Ftb3VudCIsIk51bWJlciIsInYiLCJnZXQiLCJzZXQiLCJpc1VzZWQiLCJnZXREYXNoZXNBbW91bnQiLCJkYXNoZXNBbW91bnQiLCJoZWlnaHQiLCJkYXNoIiwibWFya2VyIiwic2V0VmFsdWVzIiwiZGlyZWN0aW9uIiwiZmlsbCIsIndpZHRoIiwiY2hhbmdlVmFsdWVzIiwibXMiLCJhYnNhbHV0ZVZhbHVlIiwiY29vcmRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicGFnZVgiLCJ4IiwiZ29hbCIsImluaXRpYWwiLCJyZXBsYWNlIiwic2V0VGltZW91dCIsImhhbmRsZXIiLCJjdXJyZW50IiwiY2xlYXJUaW1lb3V0IiwibW91c2VEb3duSGFuZGxlciIsIm1vdXNlTW92ZUhhbmRsZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwibW91c2VVcEhhbmRsZXIiLCJjdXJyIiwiZGlmZkFycmF5IiwicmVkdWNlIiwicHJldmlvdXMiLCJjdXJyZW50RGlmZmVyZW5jZSIsImFic1ZhbHVlIiwiYWJzIiwibW92ZVRvTmVhcmVzdFBvaW50IiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJlbnRyeSIsInJlbW92ZVVudXNlZEVsZW1lbnRzIiwibWFwIiwiaW5pdGlhbFBvc2l0aW9uIiwic2V0UHJvcGVydHkiLCJoYW5kbGVKU0xldmVsUmFuZ2UiXSwibWFwcGluZ3MiOiJBQUFBLGFBRUEsU0FBU0EsMkJBQTJCQyxFQUFHQyxHQUFrQixJQUFJQyxFQUF1QixvQkFBWEMsUUFBMEJILEVBQUVHLE9BQU9DLFdBQWFKLEVBQUUsY0FBZSxJQUFLRSxFQUFJLENBQUUsR0FBSUcsTUFBTUMsUUFBUU4sS0FBT0UsRUFBS0ssNEJBQTRCUCxLQUFPQyxHQUFrQkQsR0FBeUIsaUJBQWJBLEVBQUVRLE9BQXFCLENBQU1OLElBQUlGLEVBQUlFLEdBQUksSUFBSU8sRUFBSSxFQUFPQyxFQUFJLGFBQWlCLE1BQU8sQ0FBRUMsRUFBR0QsRUFBR0UsRUFBRyxXQUFlLE9BQUlILEdBQUtULEVBQUVRLE9BQWUsQ0FBRUssTUFBTSxHQUFlLENBQUVB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LElBQVJrQixHQUNEMEIsRUFBSzhELFNBQVd4RixFQUFJd0YsWUFBV3hGLEVBQU0wQixNQUUxQ2lELFlBQVcsV0FBQSxPQUFNVixFQUFhLEtBQU0sS0FBTSxFQUFHLElBQUtqRSxFQUFJMEMsU0FBTyxLQXlCM0RnRCxDQUFtQnpLLEVBQUc4SixFQUFpQkYsU0F0QkVoSixFQUdmLFNBQUNpRyxHQUFXLElBQUE2RCxFQUFBQyxFQUFBM0wsMkJBQ3BCNkgsR0FEb0IsSUFDeEMsSUFBQThELEVBQUEvSyxNQUFBOEssRUFBQUMsRUFBQTlLLEtBQUFDLE1BQTRCLENBQUEsSUFBakI4SyxFQUFpQkYsRUFBQTNLLFdBQ0g4RCxJQUFwQitHLEVBQU0sR0FBR3RDLFFBQ1p6QixFQUFNLE9BQVErRCxFQUFNLEtBSGtCLE1BQUF4SyxHQUFBdUssRUFBQTNLLEVBQUFJLEdBQUEsUUFBQXVLLEVBQUF6SyxJQU14QyxPQUFPMkcsRUFjK0JnRSxDQUFxQmhFLEdBQVE3RSxPQXZCbkIrRyxFQXdCNUN4QixFQXZCRzVHLG1CQUFJQyxHQUFLa0ssS0FBSSxTQUFBcEwsR0FBQyxPQUFJZ0gsRUFBbUJoSCxFQUFHcUosZUEyQ2hEN0IsRUFBYTNELGlCQUFpQixZQUFhdUcsR0FFM0MsSUFDT2lCLEVBQUFBLEVBQWtCckUsRUFBbUJXLEVBQzFDRSxHQUNETCxFQUFhWSxNQUFNa0QsWUFBWSxPQUFRRCxFQUFrQixNQUN6RDNELEVBQW9CdkUsU0FDbkIsU0FBQzRELEdBQUQsT0FBVUEsRUFBS3FCLE1BQU1rRCxZQUFZLFFBQ2hDRCxFQUFrQixTQUt0QkUiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XHJcblxyXG5cdGNvbnN0IGdldFJhbmRvbVN0cmluZyA9IChsZW5ndGggPSA3KSA9PiB7XHJcblx0XHRyZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKGxlbmd0aCk7XHJcblx0fTtcclxuXHQvL1x0Y3JlYXRlIGZsb2F0aW5nIHBsYWNlaG9sZGVyc1xyXG5cdGNvbnN0IGhhbmRsZUZsb2F0aW5nUGxhY2Vob2xkZXJzID0gKCkgPT4ge1xyXG5cdFx0Y29uc3QgY3JlYXRlRmxvYXRpbmdQbGFjZWhvbGRlciA9IChlbCkgPT4ge1xyXG5cclxuXHRcdFx0Y29uc3QgdGV4dCA9IGVsLmRhdGFzZXQucGxhY2Vob2xkZXI7XHJcblx0XHRcdGlmICh0ZXh0ID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuXHJcblx0XHRcdGNvbnN0IHBsYWNlaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuXHRcdFx0cGxhY2Vob2xkZXIuZm9yID0gZWwubmFtZTtcclxuXHRcdFx0cGxhY2Vob2xkZXIudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG5cdFx0XHRwbGFjZWhvbGRlci5jbGFzc0xpc3QuYWRkKCdmbG9hdGluZy1wbGFjZWhvbGRlcicpO1xyXG5cdFx0XHRlbC5wYXJlbnRFbGVtZW50LnByZXBlbmQocGxhY2Vob2xkZXIpO1xyXG5cdFx0XHRlbC5wbGFjZWhvbGRlckVsID0gcGxhY2Vob2xkZXI7XHJcblx0XHRcdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZSA9PiB7XHJcblx0XHRcdFx0cGxhY2Vob2xkZXIuY2xhc3NMaXN0LmFkZCgnZm9jdXMnKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGNvbnN0IG9uRmxvYXRpbmdMYWJlbEJsdXIgPSBlID0+IHtcclxuXHRcdFx0XHRwbGFjZWhvbGRlci5jbGFzc0xpc3QucmVtb3ZlKCdmb2N1cycpO1xyXG5cdFx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2hhcy12YWx1ZScpO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRlbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZSA9PiB7XHJcblx0XHRcdFx0aWYgKGVsLnZhbHVlID09PSB1bmRlZmluZWQgfHwgZWwudmFsdWUgPT09ICcnKSB7XHJcblx0XHRcdFx0XHRvbkZsb2F0aW5nTGFiZWxCbHVyKGUpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRlbC5jbGFzc0xpc3QuYWRkKCdoYXMtdmFsdWUnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHRcdGNvbnN0IGVsZW1lbnRzV2l0aFBsYWNlaG9sZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuXHRcdFx0J1tkYXRhLXBsYWNlaG9sZGVyXScpO1xyXG5cdFx0ZWxlbWVudHNXaXRoUGxhY2Vob2xkZXIuZm9yRWFjaChlbCA9PiBjcmVhdGVGbG9hdGluZ1BsYWNlaG9sZGVyKGVsKSk7XHJcblxyXG5cdH07XHJcblx0aGFuZGxlRmxvYXRpbmdQbGFjZWhvbGRlcnMoKTtcclxuXHJcblx0Ly8gYmlydGh5ZWFyIHNlbGVjdFxyXG5cdGNvbnN0IGhhbmRsZUJpcnRoWWVhclNlbGVjdCA9ICgpID0+IHtcclxuXHRcdGNvbnN0IGJpcnRoWWVhclNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNlbGVjdC15ZWFyXScpO1xyXG5cdFx0YmlydGhZZWFyU2VsZWN0LmNsYXNzTGlzdC5hZGQoJ2JpcnRoeWVhci1zZWxlY3QnKTtcclxuXHJcblx0XHQvLyBpbnNlcnQgaWNvblxyXG5cdFx0Y29uc3QgZXhwYW5kSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG5cdFx0ZXhwYW5kSWNvbi5zcmMgPSAnaW1hZ2VzL3N2Zy9leHBhbmQtbGlzdC5zdmcnO1xyXG5cdFx0ZXhwYW5kSWNvbi5hbHQgPSAnZXhwYW5kLWJpcnRoeWVhci1saXN0JztcclxuXHRcdGV4cGFuZEljb24uY2xhc3NMaXN0LmFkZCgnYmlydGh5ZWFyLXNlbGVjdF9faWNvbicpO1xyXG5cdFx0YmlydGhZZWFyU2VsZWN0LnByZXBlbmQoZXhwYW5kSWNvbik7XHJcblxyXG5cdFx0Ly8gZ2V0IGlucHV0XHJcblx0XHRjb25zdCBpbnB1dCA9IGJpcnRoWWVhclNlbGVjdC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xyXG5cdFx0aW5wdXQuY2xhc3NMaXN0LmFkZCgnYmlydGh5ZWFyLXNlbGVjdF9faW5wdXQnKTtcclxuXHRcdGlucHV0LnJlYWRPbmx5ID0gJ3JlYWRvbmx5JztcclxuXHJcblx0XHQvLyBpbnNlcnQgbGlzdFxyXG5cdFx0Y29uc3QgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xyXG5cdFx0dWwuY2xhc3NMaXN0LmFkZCgnYmlydGh5ZWFyLXNlbGVjdF9fbGlzdCcpO1xyXG5cdFx0Y29uc3QgbWluID0gYmlydGhZZWFyU2VsZWN0LmRhdGFzZXQueWVhclN0YXJ0IHx8IDE5NzA7XHJcblx0XHRjb25zdCBtYXggPSBiaXJ0aFllYXJTZWxlY3QuZGF0YXNldC55ZWFyRW5kIHx8IDIwMDM7XHJcblx0XHRmb3IgKGxldCBpID0gbWF4OyBpID49IG1pbjsgaS0tKSB7XHJcblx0XHRcdGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuXHRcdFx0bGkuY2xhc3NMaXN0LmFkZCgnYmlydGh5ZWFyLXNlbGVjdF9fbGlzdC1pdGVtJyk7XHJcblx0XHRcdGxpLnRleHRDb250ZW50ID0gaTtcclxuXHRcdFx0bGkub25jbGljayA9IGUgPT4ge1xyXG5cclxuXHRcdFx0XHRpbnB1dC52YWx1ZSA9IGk7XHJcblx0XHRcdFx0aW5wdXQuY2xhc3NMaXN0LmFkZCgnaGFzLXZhbHVlJyk7XHJcblx0XHRcdFx0aW5wdXQucGxhY2Vob2xkZXJFbC5jbGFzc0xpc3QuYWRkKCdmb2N1cycpO1xyXG5cclxuXHRcdFx0fTtcclxuXHRcdFx0dWwuYXBwZW5kKGxpKTtcclxuXHRcdH1cclxuXHRcdGJpcnRoWWVhclNlbGVjdC5wcmVwZW5kKHVsKTtcclxuXHJcblx0XHRjb25zdCBvcGVuU2VsZWN0aW9uID0gZSA9PiB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0ZXhwYW5kSWNvbi5jbGFzc0xpc3QuYWRkKCdiaXJ0aHllYXItc2VsZWN0X19pY29uLXJvdGF0ZWQnKTtcclxuXHRcdFx0dWwuY2xhc3NMaXN0LmFkZCgnc2hvd24nKTtcclxuXHRcdH07XHJcblx0XHRjb25zdCBjbG9zZVNlbGVjdGlvbiA9IGUgPT4ge1xyXG5cdFx0XHRleHBhbmRJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2JpcnRoeWVhci1zZWxlY3RfX2ljb24tcm90YXRlZCcpO1xyXG5cdFx0XHR1bC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93bicpO1xyXG5cdFx0fTtcclxuXHRcdC8vIGFkZCBoYW5kbGVyc1xyXG5cdFx0aW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBlID0+IG9wZW5TZWxlY3Rpb24oZSkpO1xyXG5cclxuXHRcdGV4cGFuZEljb24uYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBlID0+IG9wZW5TZWxlY3Rpb24oZSkpO1xyXG5cclxuXHRcdGV4cGFuZEljb24uYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGUgPT4gY2xvc2VTZWxlY3Rpb24oZSkpO1xyXG5cclxuXHRcdGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBlID0+IGNsb3NlU2VsZWN0aW9uKGUpKTtcclxuXHJcblx0fTtcclxuXHRoYW5kbGVCaXJ0aFllYXJTZWxlY3QoKTtcclxuXHJcblx0Ly8gY3VzdG9tIGNoZWNrYm94ZXNcclxuXHRjb25zdCBoYW5kbGVDdXN0b21DaGVja2JveGVzID0gKCkgPT4ge1xyXG5cdFx0Y29uc3QgY3JlYXRlQ3VzdG9tQ2hlY2tCb3ggPSAoZWwpID0+IHtcclxuXHRcdFx0Y29uc3QgcGFyZW50ID0gZWwucGFyZW50RWxlbWVudDtcclxuXHRcdFx0ZWwuaGlkZGVuID0gJ2hpZGRlbic7XHJcblx0XHRcdGNvbnN0IGlkID0gZWwuaWQgfHwgKCgpID0+IHtcclxuXHRcdFx0XHRjb25zdCBuZXdJZCA9IGdldFJhbmRvbVN0cmluZygpO1xyXG5cdFx0XHRcdGVsLnNldEF0dHJpYnV0ZSgnaWQnLCBuZXdJZCk7XHJcblx0XHRcdFx0cmV0dXJuIG5ld0lkO1xyXG5cdFx0XHR9KSgpO1xyXG5cdFx0XHRjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuXHRcdFx0Y2hlY2tib3guY2xhc3NMaXN0LmFkZCgnY3VzdG9tLWNoZWNrYm94Jyk7XHJcblxyXG5cdFx0XHRjb25zdCBpbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHRcdFx0aW5kaWNhdG9yLnNyYyA9ICdpbWFnZXMvc3ZnL2NoZWNrZWQuc3ZnJztcclxuXHRcdFx0aW5kaWNhdG9yLmFsdCA9ICcnO1xyXG5cdFx0XHRpbmRpY2F0b3IuY2xhc3NMaXN0LmFkZCgnY3VzdG9tLWNoZWNrYm94X19pbmRpY2F0b3InKTtcclxuXHRcdFx0Y2hlY2tib3guY2hlY2tlZCA9IGZhbHNlO1xyXG5cdFx0XHRjaGVja2JveC5hcHBlbmQoaW5kaWNhdG9yKTtcclxuXHJcblx0XHRcdGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuXHRcdFx0bGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCBpZCk7XHJcblx0XHRcdGxhYmVsLmNsYXNzTmFtZSA9ICdjdXN0b20tY2hlY2tib3hfX2xhYmVsJztcclxuXHRcdFx0bGFiZWwudGV4dENvbnRlbnQgPSBlbC5kYXRhc2V0LmxhYmVsO1xyXG5cclxuXHRcdFx0Y2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgY2hlY2tlZCA9IGNoZWNrYm94LmNoZWNrZWQ7XHJcblxyXG5cdFx0XHRcdGlmICghY2hlY2tlZCkge1xyXG5cdFx0XHRcdFx0Y2hlY2tib3guY2xhc3NMaXN0LmFkZCgnY3VzdG9tLWNoZWNrYm94LS1jaGVja2VkJyk7XHJcblx0XHRcdFx0XHRpbmRpY2F0b3IuY2xhc3NMaXN0LmFkZChcclxuXHRcdFx0XHRcdFx0J2N1c3RvbS1jaGVja2JveF9faW5kaWNhdG9yLS12aXNpYmxlJyk7XHJcblx0XHRcdFx0XHRlbC5zZXRBdHRyaWJ1dGUoJ2NoZWNrZWQnLCB0cnVlKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y2hlY2tib3guY2xhc3NMaXN0LnJlbW92ZSgnY3VzdG9tLWNoZWNrYm94LS1jaGVja2VkJyk7XHJcblx0XHRcdFx0XHRpbmRpY2F0b3IuY2xhc3NMaXN0LnJlbW92ZShcclxuXHRcdFx0XHRcdFx0J2N1c3RvbS1jaGVja2JveF9faW5kaWNhdG9yLS12aXNpYmxlJyk7XHJcblx0XHRcdFx0XHRlbC5zZXRBdHRyaWJ1dGUoJ2NoZWNrZWQnLCBmYWxzZSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjaGVja2JveC5jaGVja2VkID0gIWNoZWNrZWQ7XHJcblxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHBhcmVudC5hcHBlbmQoY2hlY2tib3gpO1xyXG5cdFx0XHRwYXJlbnQuYXBwZW5kKGxhYmVsKTtcclxuXHRcdH07XHJcblxyXG5cdFx0Y29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1jdXN0b20tY2hlY2tib3hdJyk7XHJcblx0XHRlbGVtZW50cy5mb3JFYWNoKGl0ZW0gPT4gY3JlYXRlQ3VzdG9tQ2hlY2tCb3goaXRlbSkpO1xyXG5cdH07XHJcblx0aGFuZGxlQ3VzdG9tQ2hlY2tib3hlcygpO1xyXG5cclxuXHRjb25zdCBnZXRSZWxhdGl2ZVBlcmNlbnRhZ2UgPSAodmFsLCB0YXJnZXQpID0+IHtcclxuXHRcdGNvbnN0IG9uZVBlcmNlbnQgPSB0YXJnZXQgLyAxMDA7XHJcblx0XHRyZXR1cm4gKHRhcmdldCAtICh0YXJnZXQgLSB2YWwpKSAvIG9uZVBlcmNlbnQ7XHJcblx0fTtcclxuXHJcblx0Ly8gamF2YXNjcmlwdCBzZWN0aW9uIHJhbmdlXHJcblx0Y29uc3QgZGVsYXkgPSAoZm4sIG1zKSA9PiB7XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmIChEYXRlLm5vdygpIDwgZGVsYXkubmV4dFBvc3NpYmxlQ2FsbERhdGUpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0Zm4oLi4uYXJndW1lbnRzKTtcclxuXHRcdFx0ZGVsYXkubmV4dFBvc3NpYmxlQ2FsbERhdGUgPSBEYXRlLm5vdygpICsgbXM7XHJcblx0XHR9O1xyXG5cclxuXHR9O1xyXG5cclxuXHRjb25zdCBnZXRGcm9tUGVyY2VudGFnZXMgPSAocGVyY2VudGFnZXMsIHRhcmdldCkgPT4ge1xyXG5cdFx0cmV0dXJuIHRhcmdldCAvIDEwMCAqIHBlcmNlbnRhZ2VzO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGdldERhc2hlc0Ftb3VudCA9IChwb2ludCwgcG9pbnRzKSA9PiB7XHJcblx0XHRwb2ludCA9IE51bWJlcihwb2ludClcclxuXHRcdGNvbnN0IHYgPSBwb2ludHMuZ2V0KHBvaW50KVxyXG5cdFx0aWYgKHYpIHtcclxuXHRcdFx0cG9pbnRzLnNldChwb2ludCwgey4uLnYsIGlzVXNlZCA6IHRydWV9KVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHY7XHJcblx0fTtcclxuXHJcblx0Y29uc3QgaGFuZGxlSlNMZXZlbFJhbmdlID0gKCkgPT4ge1xyXG5cclxuXHRcdGNvbnN0IHBvaW50cyA9IG5ldyBNYXAoW1xyXG5cdFx0XHRbMCwge2Rhc2hlczogNywgbWFya2VySGVpZ2h0OiAwfV0sXHJcblx0XHRcdFsyNCwge2Rhc2hlczogNiwgbWFya2VySGVpZ2h0OiA2fV0sXHJcblx0XHRcdFs1MCwge2Rhc2hlczogNSwgbWFya2VySGVpZ2h0OiA5fV0sXHJcblx0XHRcdFs3NSwge2Rhc2hlczogNCwgbWFya2VySGVpZ2h0OiAxMX1dLFxyXG5cdFx0XHRbMTAwLCB7ZGFzaGVzOiAzLCBtYXJrZXJIZWlnaHQ6IDE0fV0sXHJcblx0XHRdKTtcclxuXHJcblx0XHRjb25zdCByYW5nZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXJhbmdlXScpO1xyXG5cdFx0Y29uc3QgcmFuZ2VDb250cm9sID0gcmFuZ2UucXVlcnlTZWxlY3RvcignLnJhbmdlX19jb250cm9sJyk7XHJcblx0XHRjb25zdCByYW5nZUNvbnRyb2xDb250YWluZXIgPSByYW5nZS5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHQnLnJhbmdlX19jb250cm9sLWNvbnRhaW5lcicpO1xyXG5cdFx0Y29uc3QgcmFuZ2VHcmFkaWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmFuZ2VfX2dyYWRpZW50Jyk7XHJcblx0XHRjb25zdCByYW5nZUdyYWRpZW50c0ZpbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuXHRcdFx0Jy5yYW5nZV9fZ3JhZGllbnQtZmlsbCcpO1xyXG5cdFx0Y29uc3QgaW5pdGlhbFZhbHVlUGVyY2VudGFnZXMgPSByYW5nZS5kYXRhc2V0LnJhbmdlU3RhcnQ7XHJcblx0XHRjb25zdCByYW5nZVdpZHRoID0gcmFuZ2Uub2Zmc2V0V2lkdGg7XHJcblxyXG5cdFx0Y29uc3QgY3JlYXRlUG9pbnRzID0gKHBvaW50c0RhdGEpID0+IHtcclxuXHRcdFx0Y29uc3QgcG9pbnRzID0gcmFuZ2UucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtcG9pbnRdJyk7XHJcblx0XHRcdHBvaW50cy5mb3JFYWNoKHBvaW50ID0+IHtcclxuXHRcdFx0XHRsZXQgb3JpZW50YXRpb25BZGRpdGlvbkNsYXNzID0gJyc7XHJcblx0XHRcdFx0bGV0IHRleHRBZGRpdGlvbkNsYXNzID0gJyc7XHJcblx0XHRcdFx0bGV0IG1hcmtlckFkZGl0aW9uYWxDbGFzcyA9ICcnO1xyXG5cdFx0XHRcdGxldCBvZmZzZXRMZWZ0ID0gZ2V0RnJvbVBlcmNlbnRhZ2VzKHBvaW50LmRhdGFzZXQucG9pbnQsXHJcblx0XHRcdFx0XHRyYW5nZVdpZHRoKTtcclxuXHRcdFx0XHRpZiAob2Zmc2V0TGVmdCA9PT0gcmFuZ2VXaWR0aCkge1xyXG5cdFx0XHRcdFx0cG9pbnQuY2xhc3NMaXN0LmFkZCgncmFuZ2VfX3BvaW50LS1yaWdodCcpO1xyXG5cdFx0XHRcdFx0b3JpZW50YXRpb25BZGRpdGlvbkNsYXNzID0gJ3JhbmdlX19wb2ludC1vcmllbnRhdGlvbi0tcmlnaHQnO1xyXG5cdFx0XHRcdFx0dGV4dEFkZGl0aW9uQ2xhc3MgPSAncmFuZ2VfX3BvaW50LXRleHQtLXJpZ2h0JztcclxuXHRcdFx0XHRcdG1hcmtlckFkZGl0aW9uYWxDbGFzcyA9ICdyYW5nZV9fcG9pbnQtbWFya2VyLS1yaWdodCc7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHBvaW50LnN0eWxlLmxlZnQgPSBvZmZzZXRMZWZ0ICsgJ3B4JztcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNvbnN0IG9yaWVudGF0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0b3JpZW50YXRpb24uY2xhc3NOYW1lID0gJ3JhbmdlX19wb2ludC1vcmllbnRhdGlvbiAnICtcclxuXHRcdFx0XHRcdG9yaWVudGF0aW9uQWRkaXRpb25DbGFzcztcclxuXHJcblx0XHRcdFx0Y29uc3Qge2Rhc2hlczogZGFzaGVzQW1vdW50LCBtYXJrZXJIZWlnaHR9ID0gZ2V0RGFzaGVzQW1vdW50KFxyXG5cdFx0XHRcdFx0cG9pbnQuZGF0YXNldC5wb2ludCwgcG9pbnRzRGF0YSk7XHJcblx0XHRcdFx0Y29uc3QgZGFzaGVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHRcdFx0ZGFzaGVzLmNsYXNzTmFtZSA9ICdyYW5nZV9fcG9pbnQtZGFzaGVzJztcclxuXHRcdFx0XHRkYXNoZXMuc3R5bGUuaGVpZ2h0ID0gZGFzaGVzQW1vdW50ICogMiArICdweCc7XHJcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBkYXNoZXNBbW91bnQ7IGkrKykge1xyXG5cdFx0XHRcdFx0Y29uc3QgZGFzaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuXHRcdFx0XHRcdGRhc2guY2xhc3NOYW1lID0gJ3JhbmdlX19wb2ludC1kYXNoJztcclxuXHRcdFx0XHRcdGRhc2hlcy5hcHBlbmQoZGFzaCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdG9yaWVudGF0aW9uLmFwcGVuZChkYXNoZXMpO1xyXG5cclxuXHRcdFx0XHRjb25zdCBtYXJrZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdFx0XHRtYXJrZXIuY2xhc3NOYW1lID0gJ3JhbmdlX19wb2ludC1tYXJrZXIgJyArXHJcblx0XHRcdFx0XHRtYXJrZXJBZGRpdGlvbmFsQ2xhc3M7XHJcblx0XHRcdFx0bWFya2VyLnN0eWxlLmhlaWdodCA9IG1hcmtlckhlaWdodCArICdweCc7XHJcblx0XHRcdFx0b3JpZW50YXRpb24uYXBwZW5kKG1hcmtlcik7XHJcblxyXG5cdFx0XHRcdGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcblx0XHRcdFx0dGV4dC5jbGFzc05hbWUgPSAncmFuZ2VfX3BvaW50LXRleHQgJyArIHRleHRBZGRpdGlvbkNsYXNzO1xyXG5cdFx0XHRcdHRleHQudGV4dENvbnRlbnQgPSBwb2ludC5kYXRhc2V0LnRleHQ7XHJcblx0XHRcdFx0cG9pbnQuYXBwZW5kKHRleHQpO1xyXG5cdFx0XHRcdHBvaW50LmFwcGVuZChvcmllbnRhdGlvbik7XHJcblx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHRcdGNyZWF0ZVBvaW50cyhwb2ludHMpO1xyXG5cclxuXHRcdGNvbnN0IHNldFZhbHVlcyA9IChkaXJlY3Rpb24sIHYsIHN0ZXApID0+IHtcclxuXHRcdFx0cmFuZ2VHcmFkaWVudHNGaWxscy5mb3JFYWNoKGZpbGwgPT4ge1xyXG5cdFx0XHRcdGZpbGwuc3R5bGUud2lkdGggPSByYW5nZVdpZHRoIC0gdiArICdweCc7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0aWYgKGRpcmVjdGlvbiA9PT0gJ3VwJykge1xyXG5cdFx0XHRcdHJhbmdlQ29udHJvbC5zdHlsZS5sZWZ0ID0gdiArICdweCc7XHJcblx0XHRcdFx0diArPSBzdGVwO1xyXG5cclxuXHRcdFx0fSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdkb3duJykge1xyXG5cdFx0XHRcdHJhbmdlQ29udHJvbC5zdHlsZS5sZWZ0ID0gdiArICdweCc7XHJcblx0XHRcdFx0diAtPSBzdGVwO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdGNvbnN0IGNoYW5nZVZhbHVlcyA9IChlLCBlbCwgc3RlcCA9IDEsIG1zID0gNTAsIGFic2FsdXRlVmFsdWUgPSBudWxsKSA9PiB7XHJcblx0XHRcdGxldCB2O1xyXG5cdFx0XHQvLyBpZiB2YWx1ZSBpcyBwcm92aWRlZCB0aGVuIGp1c3QgbW92ZSB0byBpdFxyXG5cdFx0XHRpZiAoYWJzYWx1dGVWYWx1ZSAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdHYgPSBhYnNhbHV0ZVZhbHVlXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc3QgY29vcmRzID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHRcdFx0diA9IGUucGFnZVggLSBjb29yZHMueDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgZ29hbCA9IHY7XHJcblx0XHRcdGNvbnN0IGluaXRpYWwgPSByYW5nZUNvbnRyb2wuc3R5bGUubGVmdC5yZXBsYWNlKCdweCcsICcnKTtcclxuXHRcdFx0Y29uc3QgZGlyZWN0aW9uID0gZ29hbCA+IGluaXRpYWwgPyAndXAnIDogJ2Rvd24nO1xyXG5cclxuXHRcdFx0bGV0IGkgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIGhhbmRsZXIoKSB7XHJcblx0XHRcdFx0c2V0VmFsdWVzKGRpcmVjdGlvbiwgdiwgc3RlcCk7XHJcblx0XHRcdFx0Y29uc3QgY3VycmVudCA9IHY7XHJcblx0XHRcdFx0aWYgKGN1cnJlbnQgPT09IGdvYWwpIHtcclxuXHRcdFx0XHRcdGNsZWFyVGltZW91dChpKTtcclxuXHRcdFx0XHRcdG1vdXNlRG93bkhhbmRsZXIuY3VycmVudCA9IGN1cnJlbnQ7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGkgPSBzZXRUaW1lb3V0KGhhbmRsZXIsIG1zKVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH0sIG1zKTtcclxuXHJcblx0XHR9O1xyXG5cclxuXHJcblx0XHRjb25zdCBpc0Nsb3NlclRvVXBwZXIgPSAoY3VyciwgdXBwZXJWYWx1ZSwgbG93ZXJWYWx1ZSkgPT4ge1xyXG5cdFx0XHRsZXQgbG93ZXJDb3VudCwgaGlnaGVyQ291bnQ7XHJcblx0XHRcdGhpZ2hlckNvdW50ID0gbG93ZXJDb3VudCA9IDA7XHJcblx0XHRcdGZvciAobGV0IGkgPSBjdXJyOyBpIDw9IHVwcGVyVmFsdWU7IGkrKywgaGlnaGVyQ291bnQrKykge31cclxuXHRcdFx0Zm9yIChsZXQgaSA9IGN1cnI7IGkgPj0gbG93ZXJWYWx1ZTsgaS0tLCBsb3dlckNvdW50KyspIHt9XHJcblx0XHRcdHJldHVybiBoaWdoZXJDb3VudCA+IGxvd2VyQ291bnQ7XHJcblx0XHR9O1xyXG5cclxuXHRcdGNvbnN0IG1vdmVUb05lYXJlc3RQb2ludCA9IChlLCBjdXJyLCBwb2ludHMpID0+IHtcclxuXHJcblx0XHRcdC8vIHB1c2ggYWxsIG9mZnNldCB2YWx1ZXMgaW50byBhcnJheVxyXG5cdFx0XHRjb25zdCBkaWZmQXJyYXkgPSBbXTtcclxuXHRcdFx0cG9pbnRzLnJlZHVjZSgocHJldmlvdXMsIGN1cnJlbnQpID0+IHtcclxuXHRcdFx0XHRsZXQgY3VycmVudERpZmZlcmVuY2UgPSAgY3VycmVudCAtIGN1cnI7XHJcblx0XHRcdFx0ZGlmZkFycmF5LnB1c2goe1xyXG5cdFx0XHRcdFx0dmFsdWU6IGN1cnJlbnREaWZmZXJlbmNlLFxyXG5cdFx0XHRcdFx0YWJzVmFsdWU6IE1hdGguYWJzKGN1cnJlbnREaWZmZXJlbmNlKSxcclxuXHRcdFx0XHRcdHBvaW50OiBjdXJyZW50LFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHJldHVybiBjdXJyZW50O1xyXG5cdFx0XHR9LCBwb2ludHNbIDAgXSk7XHJcblxyXG5cdFx0XHQvLyBmaW5kIG1pbiBvZmZzZXRcclxuXHRcdFx0bGV0IG1pbjtcclxuXHRcdFx0ZGlmZkFycmF5LmZvckVhY2goaXRlbSA9PiB7XHJcblx0XHRcdFx0aWYgKCBtaW4gPT09IHVuZGVmaW5lZFxyXG5cdFx0XHRcdFx0fHwgaXRlbS5hYnNWYWx1ZSA8IG1pbi5hYnNWYWx1ZSApIG1pbiA9IGl0ZW07XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IGNoYW5nZVZhbHVlcyhudWxsLCBudWxsLCAxLCA0MDAsIG1pbi5wb2ludCksMjAwKVxyXG5cdFx0fTtcclxuXHJcblx0XHRjb25zdCBhc3NpZ25WYWx1ZXNBY2NvcmRpbmdUb1BlcmNlbnRhZ2VzID0gKGFyciwgd2lkdGgpID0+IHtcclxuXHRcdFx0cmV0dXJuIFsuLi5hcnJdLm1hcChpID0+IGdldEZyb21QZXJjZW50YWdlcyhpLCB3aWR0aCkpO1xyXG5cdFx0fTtcclxuXHRcdGNvbnN0IHJlbW92ZVVudXNlZEVsZW1lbnRzID0gKHBvaW50cykgPT4ge1xyXG5cdFx0XHRmb3IgKGNvbnN0IGVudHJ5IG9mIHBvaW50cykge1xyXG5cdFx0XHRcdGlmIChlbnRyeVsxXS5pc1VzZWQgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFx0cG9pbnRzLmRlbGV0ZShlbnRyeVswXSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHBvaW50c1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IG1vdXNlRG93bkhhbmRsZXIgPSBmdW5jdGlvbihlKSB7XHJcblx0XHRcdGNvbnN0IG1vdXNlTW92ZUhhbmRsZXIgPSAoZSkgPT4ge1xyXG5cdFx0XHRcdGNoYW5nZVZhbHVlcyhlLCByYW5nZUNvbnRyb2xDb250YWluZXIpO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRjb25zdCBtb3VzZVVwSGFuZGxlciA9IChlKSA9PiB7XHJcblx0XHRcdFx0cmFuZ2VDb250cm9sQ29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsXHJcblx0XHRcdFx0XHRtb3VzZU1vdmVIYW5kbGVyKTtcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdHJhbmdlQ29udHJvbENvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJyxcclxuXHRcdFx0XHRcdFx0bW91c2VVcEhhbmRsZXIpO1xyXG5cdFx0XHRcdFx0bW92ZVRvTmVhcmVzdFBvaW50KGUsIG1vdXNlRG93bkhhbmRsZXIuY3VycmVudCxcclxuXHRcdFx0XHRcdFx0YXNzaWduVmFsdWVzQWNjb3JkaW5nVG9QZXJjZW50YWdlcyhyZW1vdmVVbnVzZWRFbGVtZW50cyhwb2ludHMpLmtleXMoKSxcclxuXHRcdFx0XHRcdFx0XHRyYW5nZVdpZHRoKSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRjb25zdCBtb3VzZU91dEhhbmRsZXIgPSAoZSkgPT4ge1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKGUudGFyZ2V0ID09PSByYW5nZSkge1xyXG5cdFx0XHRcdFx0XHRyYW5nZUNvbnRyb2xDb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyxcclxuXHRcdFx0XHRcdFx0XHRtb3VzZU1vdmVIYW5kbGVyKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIHJhbmdlQ29udHJvbENvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2VVcEhhbmRsZXIpO1xyXG5cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fTtcclxuXHRcdFx0cmFuZ2UuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBtb3VzZU91dEhhbmRsZXIpO1xyXG5cdFx0XHRyYW5nZUNvbnRyb2xDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJyxcclxuXHRcdFx0XHRtb3VzZU1vdmVIYW5kbGVyKTtcclxuXHRcdFx0cmFuZ2VDb250cm9sQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBtb3VzZVVwSGFuZGxlcik7XHJcblx0XHR9O1xyXG5cclxuXHRcdHJhbmdlQ29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBtb3VzZURvd25IYW5kbGVyKTtcclxuXHJcblx0XHRjb25zdCBzZXRJbml0aXRhbFBvc2l0aW9uID0gKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBpbml0aWFsUG9zaXRpb24gPSBnZXRGcm9tUGVyY2VudGFnZXMoaW5pdGlhbFZhbHVlUGVyY2VudGFnZXMsXHJcblx0XHRcdFx0cmFuZ2VXaWR0aCk7XHJcblx0XHRcdHJhbmdlQ29udHJvbC5zdHlsZS5zZXRQcm9wZXJ0eSgnbGVmdCcsIGluaXRpYWxQb3NpdGlvbiArICdweCcpO1xyXG5cdFx0XHRyYW5nZUdyYWRpZW50c0ZpbGxzLmZvckVhY2goXHJcblx0XHRcdFx0KGl0ZW0pID0+IGl0ZW0uc3R5bGUuc2V0UHJvcGVydHkoJ3dpZHRoJyxcclxuXHRcdFx0XHRcdGluaXRpYWxQb3NpdGlvbiArICdweCcpKTtcclxuXHRcdH07XHJcblx0XHRzZXRJbml0aXRhbFBvc2l0aW9uKCk7XHJcblxyXG5cdH07XHJcblx0aGFuZGxlSlNMZXZlbFJhbmdlKCk7XHJcblxyXG5cclxuXHQvLyBtZW51XHJcblx0Y29uc3QgaGFuZGxlTWVudSA9ICgpID0+IHtcclxuXHRcdGNvbnN0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1tZW51XScpXHJcblx0XHRjb25zdCBtZW51TGlua3MgPSBtZW51LnF1ZXJ5U2VsZWN0b3JBbGwoJ21lbnVfX2xpbmsnKVxyXG5cdFx0bWVudUxpbmtzLmZvckVhY2gobGluayA9PiB7XHJcblx0XHRcdGFkZEV2ZW50TGlzdGVuZXIoKVxyXG5cdFx0fSlcclxuXHR9XHJcblxyXG59KTsiXX0=
